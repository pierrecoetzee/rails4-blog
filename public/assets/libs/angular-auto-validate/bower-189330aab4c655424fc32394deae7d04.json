/*
 * angular-auto-validate - v1.18.6 - 2015-04-16
 * https://github.com/jonsamwell/angular-auto-validate
 * Copyright (c) 2015 Jon Samwell (http://www.jonsamwell.com)
 */
!function(angular){"use strict";angular.module("jcs-autoValidate",[])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").provider("validator",[function(){var elementStateModifiers={},enableValidElementStyling=!0,enableInvalidElementStyling=!0,validationEnabled=!0,toBoolean=function(value){var v;return value&&0!==value.length?(v=value.toLowerCase(),value=!("f"===v||"0"===v||"false"===v)):value=!1,value},getAttributeValue=function(el,attrName){var val;return void 0!==el&&(val=el.attr(attrName)||el.attr("data-"+attrName)),val},attributeExists=function(el,attrName){var exists;return void 0!==el&&(exists=void 0!==el.attr(attrName)||void 0!==el.attr("data-"+attrName)),exists},getBooleanAttributeValue=function(el,attrName){return toBoolean(getAttributeValue(el,attrName))},validElementStylingEnabled=function(el){return enableValidElementStyling&&!getBooleanAttributeValue(el,"disable-valid-styling")},invalidElementStylingEnabled=function(el){return enableInvalidElementStyling&&!getBooleanAttributeValue(el,"disable-invalid-styling")};this.enable=function(isEnabled){validationEnabled=isEnabled},this.isEnabled=function(){return validationEnabled},this.setDefaultElementModifier=function(key){if(void 0===elementStateModifiers[key])throw new Error("Element modifier not registered: "+key);this.defaultElementModifier=key},this.registerDomModifier=function(key,modifier){elementStateModifiers[key]=modifier},this.setErrorMessageResolver=function(resolver){this.errorMessageResolver=resolver},this.getErrorMessage=function(errorKey,el){var defer;if(void 0===this.errorMessageResolver)throw new Error("Please set an error message resolver via the setErrorMessageResolver function before attempting to resolve an error message.");return attributeExists(el,"disable-validation-message")?(defer=angular.injector(["ng"]).get("$q").defer(),defer.resolve(""),defer.promise):this.errorMessageResolver(errorKey,el)},this.setValidElementStyling=function(enabled){enableValidElementStyling=enabled},this.setInvalidElementStyling=function(enabled){enableInvalidElementStyling=enabled},this.getDomModifier=function(el){var modifierKey=(void 0!==el?el.attr("element-modifier"):this.defaultElementModifier)||(void 0!==el?el.attr("data-element-modifier"):this.defaultElementModifier)||this.defaultElementModifier;if(void 0===modifierKey)throw new Error("Please set a default dom modifier via the setDefaultElementModifier method on the validator class.");return elementStateModifiers[modifierKey]},this.makeValid=function(el){validElementStylingEnabled(el)?this.getDomModifier(el).makeValid(el):this.makeDefault(el)},this.makeInvalid=function(el,errorMsg){invalidElementStylingEnabled(el)?this.getDomModifier(el).makeInvalid(el,errorMsg):this.makeDefault(el)},this.makeDefault=function(el){var dm=this.getDomModifier(el);dm.makeDefault&&dm.makeDefault(el)},this.defaultFormValidationOptions={forceValidation:!1,disabled:!1,validateNonVisibleControls:!1,removeExternalValidationErrorsOnSubmit:!0},this.$get=[function(){return this}]}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").factory("bootstrap3ElementModifier",["$log",function($log){var reset=function(el){angular.forEach(el.find("span"),function(spanEl){spanEl=angular.element(spanEl),(spanEl.hasClass("error-msg")||spanEl.hasClass("form-control-feedback")||spanEl.hasClass("control-feedback"))&&spanEl.remove()}),el.removeClass("has-success has-error has-feedback")},findWithClassElementAsc=function(el,klass){for(var returnEl,parent=el,i=0;10>=i;i+=1){if(void 0!==parent&&parent.hasClass(klass)){returnEl=parent;break}void 0!==parent&&(parent=parent.parent())}return returnEl},findWithClassElementDesc=function(el,klass){for(var child,i=0;i<el.children.length&&(child=el.children[i],void 0===child||!angular.element(child).hasClass(klass))&&!(void 0!==child.children&&(child=findWithClassElementDesc(child,klass),child.length>0));i+=1);return angular.element(child)},findFormGroupElement=function(el){return findWithClassElementAsc(el,"form-group")},findInputGroupElement=function(el){return findWithClassElementDesc(el,"input-group")},insertAfter=function(referenceNode,newNode){referenceNode[0].parentNode.insertBefore(newNode[0],referenceNode[0].nextSibling)},addValidationStateIcons=!1,enableValidationStateIcons=function(enable){addValidationStateIcons=enable},makeValid=function(el){var inputGroupEl,frmGroupEl=findFormGroupElement(el);if(frmGroupEl){if(reset(frmGroupEl),inputGroupEl=findInputGroupElement(frmGroupEl[0]),frmGroupEl.addClass("has-success "+(inputGroupEl.length>0?"":"has-feedback")),addValidationStateIcons){var iconElText='<span class="glyphicon glyphicon-ok form-control-feedback"></span>';inputGroupEl.length>0&&(iconElText=iconElText.replace("form-",""),iconElText='<span class="input-group-addon control-feedback">'+iconElText+"</span"),insertAfter(el,angular.element(iconElText))}}else $log.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},makeInvalid=function(el,errorMsg){var inputGroupEl,frmGroupEl=findFormGroupElement(el),helpTextEl=angular.element('<span class="help-block has-error error-msg">'+errorMsg+"</span>");if(frmGroupEl){if(reset(frmGroupEl),inputGroupEl=findInputGroupElement(frmGroupEl[0]),frmGroupEl.addClass("has-error "+(inputGroupEl.length>0?"":"has-feedback")),insertAfter(inputGroupEl.length>0?inputGroupEl:el,helpTextEl),addValidationStateIcons){var iconElText='<span class="glyphicon glyphicon-remove form-control-feedback"></span>';inputGroupEl.length>0&&(iconElText=iconElText.replace("form-",""),iconElText='<span class="input-group-addon control-feedback">'+iconElText+"</span"),insertAfter(el,angular.element(iconElText))}}else $log.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},makeDefault=function(el){var frmGroupEl=findFormGroupElement(el);frmGroupEl?reset(frmGroupEl):$log.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")};return{makeValid:makeValid,makeInvalid:makeInvalid,makeDefault:makeDefault,enableValidationStateIcons:enableValidationStateIcons,key:"bs3"}}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").factory("jcs-debounce",["$timeout",function($timeout){var debounce=function(fn,timeout,apply){timeout=angular.isUndefined(timeout)?0:timeout,apply=angular.isUndefined(apply)?!0:apply;var nthCall=0;return function(){var that=this,argz=arguments;nthCall+=1;var later=function(version){return function(){return version===nthCall?fn.apply(that,argz):void 0}}(nthCall);return $timeout(later,timeout,apply)}};return{debounce:debounce}}])}(angular),function(String,angular){"use strict";"format"in String.prototype||(String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return void 0!==typeof args[number]?args[number]:match})}),angular.autoValidate=angular.autoValidate||{errorMessages:{}},angular.autoValidate.errorMessages["en-us"]=angular.autoValidate.errorMessages["en-gb"]={defaultMsg:"Please add error message for {0}",email:"Please enter a valid email address",minlength:"Please enter at least {0} characters",maxlength:"You have entered more than the maximum {0} characters",min:"Please enter the minimum number of {0}",max:"Please enter the maximum number of {0}",required:"This field is required",date:"Please enter a valid date",pattern:"Please ensure the entered information adheres to this pattern {0}",number:"Please enter a valid number",url:"Please enter a valid URL in the format of http(s)://www.google.com"},angular.module("jcs-autoValidate").factory("defaultErrorMessageResolver",["$q","$http",function($q,$http){var cultureRetrievalPromise,currentCulture="en-gb",i18nFileRootPath="js/angular-auto-validate/dist/lang",loadRemoteCulture=function(culture){return cultureRetrievalPromise=$http.get("{0}/jcs-auto-validate_{1}.json".format(i18nFileRootPath,culture.toLowerCase()))},setI18nFileRootPath=function(rootPath){i18nFileRootPath=rootPath},setCulture=function(culture,cultureLoadingFn){var defer=$q.defer();return cultureLoadingFn=cultureLoadingFn||loadRemoteCulture,currentCulture=culture.toLowerCase(),void 0===angular.autoValidate.errorMessages[currentCulture]?(cultureRetrievalPromise=cultureLoadingFn(culture),cultureRetrievalPromise.then(function(response){cultureRetrievalPromise=void 0,angular.autoValidate.errorMessages[currentCulture]=response.data,defer.resolve(angular.autoValidate.errorMessages[currentCulture])},function(err){angular.autoValidate.errorMessages[currentCulture]={defaultMsg:"Loading culture failed!"},cultureRetrievalPromise=null,defer.reject(err)})):defer.resolve(angular.autoValidate.errorMessages[currentCulture]),defer.promise},getErrorMessages=function(culture){var defer=$q.defer();return culture=void 0===culture?currentCulture:culture.toLowerCase(),void 0!==cultureRetrievalPromise?cultureRetrievalPromise.then(function(){defer.resolve(angular.autoValidate.errorMessages[culture])},function(err){defer.reject(err)}):defer.resolve(angular.autoValidate.errorMessages[culture]),defer.promise},getMessageTypeOverride=function(errorType,el){var overrideKey;return el&&(errorType+="-err-type",overrideKey=el.attr("ng-"+errorType),void 0===overrideKey&&(overrideKey=el.attr("data-ng-"+errorType)||el.attr(errorType)),overrideKey&&(overrideKey=overrideKey.replace(/[\W]/g,""))),overrideKey},resolve=function(errorType,el){var errMsg,parameter,messageTypeOverride,defer=$q.defer(),parameters=[];if(void 0!==cultureRetrievalPromise)cultureRetrievalPromise.then(function(){resolve(errorType,el).then(function(msg){defer.resolve(msg)})});else{if(errMsg=angular.autoValidate.errorMessages[currentCulture][errorType],messageTypeOverride=getMessageTypeOverride(errorType,el),messageTypeOverride&&(errMsg=angular.autoValidate.errorMessages[currentCulture][messageTypeOverride]),void 0===errMsg&&(errMsg=angular.autoValidate.errorMessages[currentCulture].defaultMsg.format(errorType)),el&&el.attr)try{parameter=el.attr("ng-"+errorType),void 0===parameter&&(parameter=el.attr("data-ng-"+errorType)||el.attr(errorType)),parameters.push(parameter||""),errMsg=errMsg.format(parameters)}catch(e){}defer.resolve(errMsg)}return defer.promise};return{setI18nFileRootPath:setI18nFileRootPath,setCulture:setCulture,getErrorMessages:getErrorMessages,resolve:resolve}}])}(String,angular),function(angular){"use strict";angular.module("jcs-autoValidate").factory("foundation5ElementModifier",[function(){var reset=function(el,inputEl){angular.forEach(el.find("small"),function(smallEl){angular.element(smallEl).hasClass("error")&&angular.element(smallEl).remove()}),inputEl.removeClass("error")},findParentColumn=function(el){for(var parent=el,i=0;3>=i&&(void 0===parent||!parent.hasClass("columns"));i+=1)void 0!==parent&&(parent=parent.parent());return parent},makeValid=function(el){var parentColumn=findParentColumn(el);reset(parentColumn&&parentColumn.length>0?parentColumn:el,el)},makeInvalid=function(el,errorMsg){var helpTextEl,parentColumn=findParentColumn(el);reset(parentColumn||el,el),el.addClass("error"),parentColumn&&(helpTextEl=angular.element('<small class="error">'+errorMsg+"</small>"),parentColumn.append(helpTextEl))},makeDefault=function(el){makeValid(el)};return{makeValid:makeValid,makeInvalid:makeInvalid,makeDefault:makeDefault,key:"foundation5"}}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").factory("jcs-elementUtils",[function(){var isElementVisible=function(el){return el[0].offsetWidth>0&&el[0].offsetHeight>0};return{isElementVisible:isElementVisible}}]),angular.module("jcs-autoValidate").factory("validationManager",["validator","jcs-elementUtils",function(validator,elementUtils){var elementTypesToValidate=["input","textarea","select","form"],elementIsVisible=function(el){return elementUtils.isElementVisible(el)},getFormOptions=function(el){var frmCtrl=angular.element(el).controller("form");return void 0!==frmCtrl&&null!==frmCtrl?frmCtrl.autoValidateFormOptions:validator.defaultFormValidationOptions},shouldValidateElement=function(el,formOptions){var result=el&&el.length>0&&(elementIsVisible(el)||formOptions.validateNonVisibleControls)&&(elementTypesToValidate.indexOf(el[0].nodeName.toLowerCase())>-1||el[0].hasAttribute("register-custom-form-control"));return result},validateElement=function(modelCtrl,el,options){var errorType,isValid=!0,frmOptions=options||getFormOptions(el),needsValidation=modelCtrl.$pristine===!1||frmOptions.forceValidation,findErrorType=function($errors){var errorTypeToReturn,keepGoing=!0;return angular.forEach($errors,function(status,errortype){keepGoing&&status&&(keepGoing=!1,errorTypeToReturn=errortype)}),errorTypeToReturn};return frmOptions.disabled===!1&&(frmOptions.forceValidation||shouldValidateElement(el,frmOptions)&&modelCtrl&&needsValidation)&&(isValid=!modelCtrl.$invalid,frmOptions.removeExternalValidationErrorsOnSubmit&&modelCtrl.removeAllExternalValidation&&modelCtrl.removeAllExternalValidation(),isValid?validator.makeValid(el):(errorType=findErrorType(modelCtrl.$errors||modelCtrl.$error),void 0===errorType?isValid=!0:validator.getErrorMessage(errorType,el).then(function(errorMsg){validator.makeInvalid(el,errorMsg)}))),isValid},resetElement=function(element){validator.makeDefault(element)},resetForm=function(frmElement){angular.forEach(frmElement[0].all||frmElement[0].elements||frmElement[0],function(element){var controller,ctrlElement=angular.element(element);controller=ctrlElement.controller("ngModel"),void 0!==controller&&("form"===ctrlElement[0].nodeName.toLowerCase()?resetForm(ctrlElement):controller.$setPristine())})},validateForm=function(frmElement){var clonedOptions,frmValid=!0,frmCtrl=frmElement?angular.element(frmElement).controller("form"):void 0,processElement=function(ctrlElement,force,formOptions){var controller,isValid,ctrlFormOptions;ctrlElement=angular.element(ctrlElement),controller=ctrlElement.controller("ngModel"),void 0!==controller&&(force||shouldValidateElement(ctrlElement,formOptions))&&("form"===ctrlElement[0].nodeName.toLowerCase()?validateForm(ctrlElement):(ctrlFormOptions=getFormOptions(ctrlElement),ctrlFormOptions.forceValidation=force,isValid=validateElement(controller,ctrlElement,ctrlFormOptions),frmValid=frmValid&&isValid))};return void 0===frmElement||void 0!==frmCtrl&&frmCtrl.autoValidateFormOptions.disabled?void 0!==frmElement:(clonedOptions=angular.copy(frmCtrl.autoValidateFormOptions),clonedOptions.forceValidation=!0,angular.forEach(frmElement[0].all||frmElement[0].elements||frmElement[0],function(ctrlElement){processElement(ctrlElement,!0,clonedOptions)}),frmElement[0].customHTMLFormControlsCollection&&angular.forEach(frmElement[0].customHTMLFormControlsCollection,function(ctrlElement){processElement(ctrlElement,!0,clonedOptions)}),frmValid)},setElementValidationError=function(element,errorMsgKey,errorMsg){errorMsgKey?validator.getErrorMessage(errorMsgKey,element).then(function(msg){validator.makeInvalid(element,msg)}):validator.makeInvalid(element,errorMsg)};return{setElementValidationError:setElementValidationError,validateElement:validateElement,validateForm:validateForm,resetElement:resetElement,resetForm:resetForm}}])}(angular),function(angular){"use strict";function parseBooleanAttributeValue(val){return void 0!==val&&"false"!==val}function parseOptions(ctrl,validator,attrs){var opts=ctrl.autoValidateFormOptions=ctrl.autoValidateFormOptions||angular.copy(validator.defaultFormValidationOptions);opts.forceValidation=!1,opts.disabled=!validator.isEnabled()||parseBooleanAttributeValue(attrs.disableDynamicValidation),opts.validateNonVisibleControls=parseBooleanAttributeValue(attrs.validateNonVisibleControls),opts.removeExternalValidationErrorsOnSubmit=void 0===attrs.removeExternalValidationErrorsOnSubmit?!0:parseBooleanAttributeValue(attrs.removeExternalValidationErrorsOnSubmit),validator.isEnabled()===!1&&parseBooleanAttributeValue(attrs.disableDynamicValidation)===!1&&(opts.disabled=!1)}angular.module("jcs-autoValidate").directive("form",["validator",function(validator){return{restrict:"E",require:"form",priority:9999,compile:function(){return{pre:function(scope,element,attrs,ctrl){parseOptions(ctrl,validator,attrs)}}}}}]),angular.module("jcs-autoValidate").directive("ngForm",["validator",function(validator){return{restrict:"EA",require:"form",priority:9999,compile:function(){return{pre:function(scope,element,attrs,ctrl){parseOptions(ctrl,validator,attrs)}}}}}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").directive("form",["validationManager",function(validationManager){return{restrict:"E",link:function(scope,el){var formController=el.controller("form");void 0!==formController&&formController.autoValidateFormOptions&&formController.autoValidateFormOptions.disabled===!1&&(el.on("reset",function(){validationManager.resetForm(el)}),scope.$on("$destroy",function(){el.off("reset")}))}}}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").directive("registerCustomFormControl",[function(){var findParentForm=function(el){for(var parent=el,i=0;50>=i&&(void 0===parent||"form"!==parent.nodeName.toLowerCase());i+=1)void 0!==parent&&(parent=angular.element(parent).parent()[0]);return parent};return{restrict:"A",link:function(scope,element){var frmEl=findParentForm(element.parent()[0]);frmEl&&(frmEl.customHTMLFormControlsCollection=frmEl.customHTMLFormControlsCollection||[],frmEl.customHTMLFormControlsCollection.push(element[0]))}}}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").config(["$provide",function($provide){$provide.decorator("ngSubmitDirective",["$delegate","$parse","validationManager",function($delegate,$parse,validationManager){return $delegate[0].compile=function($element,attrs){var fn=$parse(attrs.ngSubmit),force="true"===attrs.ngSubmitForce;return function(scope,element){function handlerFn(event){scope.$apply(function(){var formController=$element.controller("form");void 0!==formController&&null!==formController&&formController.autoValidateFormOptions&&formController.autoValidateFormOptions.disabled===!0?fn(scope,{$event:event}):(validationManager.validateForm(element)||force===!0)&&fn(scope,{$event:event})})}element.on("submit",handlerFn),scope.$on("$destroy",function(){element.off("submit",handlerFn)})}},$delegate}])}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").config(["$provide",function($provide){$provide.decorator("ngModelDirective",["$timeout","$delegate","validationManager","jcs-debounce",function($timeout,$delegate,validationManager,debounce){var directive=$delegate[0],link=directive.link||directive.compile;return directive.compile=function(el){return function(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[0],frmCtrl=ctrls[1],supportsNgModelOptions=angular.version.major>=1&&angular.version.minor>=3,ngModelOptions=void 0===attrs.ngModelOptions?void 0:scope.$eval(attrs.ngModelOptions),setValidity=ngModelCtrl.$setValidity,setPristine=ngModelCtrl.$setPristine,setValidationState=debounce.debounce(function(){var validateOptions=void 0!==frmCtrl&&null!==frmCtrl?frmCtrl.autoValidateFormOptions:void 0;validationManager.validateElement(ngModelCtrl,element,validateOptions)},100);supportsNgModelOptions&&angular.isFunction(link)&&(link=link(el)),link.pre&&(link.pre.apply(this,arguments),ngModelOptions=void 0===ngModelCtrl.$options?void 0:ngModelCtrl.$options),void 0===attrs.formnovalidate&&void 0!==frmCtrl&&null!==frmCtrl&&frmCtrl.autoValidateFormOptions&&frmCtrl.autoValidateFormOptions.disabled===!1&&(supportsNgModelOptions||void 0===ngModelOptions||void 0===ngModelOptions.updateOn||""===ngModelOptions.updateOn?ngModelCtrl.$setValidity=function(validationErrorKey,isValid){setValidity.call(ngModelCtrl,validationErrorKey,isValid),setValidationState()}:(element.on(ngModelOptions.updateOn,function(){setValidationState()}),scope.$on("$destroy",function(){element.off(ngModelOptions.updateOn)})),ngModelCtrl.$setPristine=function(){setPristine.call(ngModelCtrl),validationManager.resetElement(element)},ngModelCtrl.autoValidated=!0),link.post?link.post.apply(this,arguments):link.apply(this,arguments),ngModelCtrl.setExternalValidation=function(errorMsgKey,errorMessage,addToModelErrors){if(addToModelErrors){var collection=ngModelCtrl.$error||ngModelCtrl.$errors;collection[errorMsgKey]=!1}ngModelCtrl.externalErrors=ngModelCtrl.externalErrors||{},ngModelCtrl.externalErrors[errorMsgKey]=!1,validationManager.setElementValidationError(element,errorMsgKey,errorMessage)},ngModelCtrl.removeExternalValidation=function(errorMsgKey,addToModelErrors){if(addToModelErrors){var collection=ngModelCtrl.$error||ngModelCtrl.$errors;collection[errorMsgKey]=!0}ngModelCtrl.externalErrors&&delete ngModelCtrl.externalErrors[errorMsgKey],validationManager.resetElement(element)},ngModelCtrl.removeAllExternalValidation=function(){if(ngModelCtrl.externalErrors){var errorCollection=ngModelCtrl.$error||ngModelCtrl.$errors;angular.forEach(ngModelCtrl.externalErrors,function(value,key){errorCollection[key]=!0}),ngModelCtrl.externalErrors={},validationManager.resetElement(element)}},frmCtrl&&(frmCtrl.setExternalValidation=function(modelProperty,errorMsgKey,errorMessageOverride,addToModelErrors){var success=!1;return frmCtrl[modelProperty]&&(frmCtrl[modelProperty].setExternalValidation(errorMsgKey,errorMessageOverride,addToModelErrors),success=!0),success},frmCtrl.removeExternalValidation=function(modelProperty,errorMsgKey,errorMessageOverride,addToModelErrors){var success=!1;return frmCtrl[modelProperty]&&(frmCtrl[modelProperty].removeExternalValidation(errorMsgKey,addToModelErrors),success=!0),success})}},$delegate}])}])}(angular),function(angular){"use strict";angular.module("jcs-autoValidate").run(["validator","defaultErrorMessageResolver","bootstrap3ElementModifier","foundation5ElementModifier",function(validator,defaultErrorMessageResolver,bootstrap3ElementModifier,foundation5ElementModifier){validator.setErrorMessageResolver(defaultErrorMessageResolver.resolve),validator.registerDomModifier(bootstrap3ElementModifier.key,bootstrap3ElementModifier),validator.registerDomModifier(foundation5ElementModifier.key,foundation5ElementModifier),validator.setDefaultElementModifier(bootstrap3ElementModifier.key)}])}(angular);